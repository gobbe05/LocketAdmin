extends layout.pug

block content
  div(x-data="{newOpen: false}" class="flex flex-col 2xl:flex-row items-start justify-center w-full gap-8")
    div(class="w-full flex-grow")
      div(class="flex items-center gap-4")
        div(hx-get="/api/order/card-order-count" hx-swap="outerHTML" hx-trigger="load")
        div(hx-get="/api/order/card-delivered-count" hx-swap="outerHTML" hx-trigger="load")
        button(@click="newOpen = !newOpen" class="bg-orange-400 text-white material-symbols-outlined ml-auto p-4 bg-white rounded-full") add
      div(class="mt-4 p-8 bg-white rounded")
        table(class="p-8 bg-white" hx-get="/api/order/get-all-orders" hx-swap="innerHTML" hx-target="#tablebody" hx-trigger="load")
          thead(class="text-gray-600")
            tr
              th(class="p-2 lg:p-4") Förnamn
              th(class="p-2 lg:p-4") Efternamn
              th(class="p-2 lg:p-4") Vara
              th(class="p-2 lg:p-4") Antal 
              th(class="p-2 lg:p-4 hidden xl:table-cell") Telefon
              th(class="p-2 lg:p-4 hidden xl:table-cell") Mail
              th(class="p-2 lg:p-4 hidden xl:table-cell") Datum
              th(class="p-2 lg:p-4") Status
              th(class="p-2 lg:p-4") 
          tbody(id="tablebody")
    div(x-show="newOpen" class="fixed grid grid-cols-[80%] place-content-center bg-[rgb(0,0,0,0.3)] w-dvw h-dvh top-0 left-0")
      div(class="bg-white p-8 rounded w-full")
        form(class='w-100 flex flex-col gap-2' hx-swap="none" hx-post="/api/order/create-order")
          div(class="flex items-center justify-between")
            h3(class="text-xl font-bold text-gray-700 mb-2") Ny Order
            span(@click="newOpen = !newOpen" class="material-symbols-outlined cursor-pointer") close
          div
            p Förnamn
            input(class='border w-full rounded' name="firstName")
          div
            p Efternamn
            input(class='border w-full rounded' name="lastName")
          div
            p E-Mail
            input(class='border w-full rounded', name="mail")
          div
            p Telefon
            input(class='border w-full rounded' name="phone")
          div
            p Vara
            input(class='border w-full rounded' name="item")
          div
            p Kvantitet 
            input(class='border w-full rounded' type="number" name="quantity")
          button(@click="newOpen = !newOpen" class='bg-slate-700 text-gray-200 px-2 py-1 rounded' type='submit') Skicka
